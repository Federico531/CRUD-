<%- include('partials/_header.ejs') %>   <!--IMPORTA VISTA QUE SE REPITE EN PARTIALS-->

<!-- Container da un pequeño margen a los lados de la pagina -->
   <div class="container">
       <div class="row">
           <!-- FORM -->  
           <!-- 5 columas (boostrap tiene 12 en total) -->
           <div class="col-md-4">
                <!-- card = cuadrado blanco-->
               <div class="card">
                   <!-- contenido dentro de card -->
                   <div class="card-body">
                       <!-- Formulario con dos elementos elementos, input y textarea -->
                       <!-- action nos lleva a una ruta y ELIGE EL METODO-->
                       <form action="/add" method="POST">
                           <!-- cada campo ira dentro de un form-group -->
                        <div class="form-group">
                            <!-- class= form-control utiliza el card mejor= -->
                            <input type="text" name = "tittle" placeholder="Inserta un titulo" class="form-control">
                        </div>
                        <div ckass="form-group">
                            <!-- Me deja extender el area de texto   -->
                            <textarea name="description" cols="80" class="form-control" placeholder="Inserta una Descripcion"></textarea>
                        </div>
                        <!-- primary es color azul, block lo adapta al tamaño del contenedor en este claso card -->
                        <!-- ESTE BOTON HACE SUBMIT AL FORM ENTERO -->
                        <button type="submit" class= "btn btn-primary btn-block">
                            Add
                        </button>
                       </form>
                   </div>
               </div>
           </div>


           <!-- LIST -->
           <div class="col-md-8">
               <!-- Agrupa los elementos en una tabla -->
               <table class="table table-bordered ">
                <!-- table header -->
                <thead>
                    <!-- fila -->
                    <tr>
                        <!-- t headers -->
                        <th>N°</th>
                        <th>Tittle</th>
                        <th>Description</th>
                        <th>Operation</th>
                    </tr>
                </thead>
                <!-- table body -->
                <tbody>

                    <!-- EL ORDEN EN QUE SUCEDEN LOS EVENTOS DE EJS ES HORIZONTAL  -->

                    <!-- Recorremos cada elemento del objeto (ejecuta como for de JS)-->
                    <% for(var i = 0; i < tasks.length; i++) {%>

                       <!-- Recorre la tabla -->
                       <!-- N° de objeto en primer columna -->
                        <td><%= i + 1 %></td>
                        <!-- segunda columnna -->
                        <td><%= tasks[i].tittle %></td>
                          <!--Tercer columna  -->
                        <td><%= tasks[i].description %></td>

<!-- MUESTRA UNA SEGUNDA FILA AL REPETIR EL PROCESO  -->
                        <td>
                            <!-- las etiquetas <a> son los enlaces a otras rutas -->
                            <!--href = envia el request a esta rutab  -->
                            <!-- en este caso va a devolver el valor de la propiedad _id del objeto en el indice i del array del collection tasks-->
                            
                            <!-- href nos envia a la ruta que accionamos y el route siempre atento procesa el post o get, o lo que sea que le haya 
                            tocado hacer-->
                            <a href="/turn/<%= tasks[i]._id %>" 
                               class="btn <%= tasks[i].status?'btn-success':'btn-dark' %> ">Done</a>
                            <a href="/delete/<%= tasks[i]._id %>" class="btn btn-danger"action="/delete" method="Delete">Delete </a>
                            <a href="/edit/<%= tasks[i]._id%>" class="btn btn-info">Edit</a>
                        </td>
                    </tr>
                    <% } %>
                </tbody>
               </table>
           </div>
       </div>
   </div>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

<%- include('partials/_footer.ejs') %> 

